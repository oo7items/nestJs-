# 控制器 controller
- 处理传入HTTP请求组件，负责接受客户端的请求，根据这些请求处理相应的操作。每个控制器中包含一组处理特定路由或端点的方法。
    - 路由：特定的HTTP方法与相应的处理程序逻辑
    - 端点：Api地址或路径，通过路径访问某个功能
- 向客户端返回响应：处理请求完成后，客户端向客户端发送适当响应，可以是HTML页面、JSON数据、文件等。
- 实际应用
    - 设置路由路径，controller('path') ，类似一个路由分组，此为分组名称
    - HTTP方法装饰器，@Get、@Post、@Path、@Deleter等
        - @Header
    - HTTP调用函数，函数名自定义，返回对象，自动序列化JSON，返回基值，不进行处理
    - 路由通配符，匹配任意字符组合
    - @HTTPCode修改响应状态码，默认201
    - @Redirect(path, statusCode)，重定向到特定的URL，默认状态码302，根据@query参数，判断重定向URL!
    - 路由参数，@params() 与 @get('路由通配符:id') 配合使用，根据路由中的动态信息执行不同业务逻辑
    - 子域名路由，@Controller({ host: 'admin.example.com' })，构建多租户应用程序或者根据不同的子域名提供不同的功能非常有用
    - 作用域：咱不研究，GraphQL 应用程序中的请求缓存，请求跟踪或多租户
    - dto是一种用于定义数据在不同层次之间传输的对象，DTO是如何定义网络数据传输的。与@Body配合使用，用于解析客户端消息体body中的数据
    - 控制器属于模块，通过导入导出建立controller和services之间的联系， 因此需要再模块中声明，这样有助于代码模块化、可维护应用程序结构。
    - 类库特有请求方式，不推荐！

# Provider
- Providers 是 Nest.js框架中的一个核心概念，用于描述应用程序中可注入组件。这些组件可以是services、respository、factories、helpers

# Services @Injectable()
- 处理应用程序数据存储和检索。具体来说进行数据库交互、文件系统操作或其他形式的数据库存储和检索。
- 这种服务设计，使得它可以在整个应用程序中被注入到其他组件（比如控制器）中，以便执行相关的数据操作。

应用实例：
- 依赖注入，@Injectable()装饰器标记的服务类，Nest.js能够利用TypeScript类型系统创建并返回实例，实现了依赖注入的功能。
    - 即同一个@Controller实例被多次注入时，使用的是相同的@Injectable()实例。
- 自定义提供者
- 基于属性的注入，特殊情况：顶级类依赖多个provider时，解决 CatsController 类的依赖关系，nestJs不推荐！
- 手动实例化，需要跳出内置的依赖注入系统，并手动检索或实例化提供程序。 --等待笔记

# module @Module()
- 封装特定功能领域的代码，将相关组件、控制器、服务等组织在一起，支持模块之间的隔离和重用。
- 模块之间的封装性：将相关组件控制器、服务等组织在一起。每个模块都有自己的作用域，模块内部的提供者默认情况下是私有的，只能在该模块内部使用
- 模块提供者的可见性
- 导出提供者实现模块的公共接口


# 数据传输对象 dto
- 管理数据的形状，处理存储库、管道之类的东西会特别强调
- 概念：1. 数据传输对象是在进程之间传递数据的对象 2. 数据传输对象是用于封装数据并将其从应用程序的一个子系统发送到另一个子系统的对象 2. 定义数据如何通过网络发送的对象
- 存储检索、序列化、自身数据的重复化
- 可以用于数据验证
- dto不是一个模型定义，数据流经系统为特定情况或特定操作定义数据的形状。
- class类定义dto在运行时不会消失，控制器、管理服务和存储库等地方会用到，比如一系列订单内容。

# typeORM
- 关系映射允许您使用面向对象范例从数据库查询和操作数据的技术
- 开发人员喜欢用编程语言与数据库通信，而不是直接发送普通查询

- props
- 数据库处理、数据类型、关系等等
- 数据库抽象，随时改变数据库类型
- oop
- 管理实体、存储库、列、关系、复制、索引、查询、日志记录等等

# 管道 nestjs pipes npm i class-validator class-transformer app.useGlobalPipes(new ValidationPipe())
- 处理验证和错误处理
- 数据转换和验证
- 抛出异常，传到错误响应中
- 传递和管道确保某些参数是整数，默认情况下，参数是字符串类型
- 管道验证参数是否是数字，它实际上会将其转换为实际的JavaScript数字类型
- 根据dto或数据传输对象配合良好的类来验证整个对象的兼容性。
- 如果任何属性不能正确映射，验证将失败

安装
- npm i typeorm @nest/js/typeorm pg
- @Entity 告诉types这个类是一个数据库实体

# 活动记录与数据映射器模式
- type支持两种模式，活动记录和数据映射器
- 数据库交互方法 find findOne等